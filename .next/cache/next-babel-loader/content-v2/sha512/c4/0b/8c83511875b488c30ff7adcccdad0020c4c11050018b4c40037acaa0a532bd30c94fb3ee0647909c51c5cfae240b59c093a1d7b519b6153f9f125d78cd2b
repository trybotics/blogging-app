{"ast":null,"code":"function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nexport default class InfiniteScroll extends Component {\n  constructor(props) {\n    super(props);\n    this.scrollListener = this.scrollListener.bind(this);\n    this.eventListenerOptions = this.eventListenerOptions.bind(this);\n    this.mousewheelListener = this.mousewheelListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.options = this.eventListenerOptions();\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    if (this.props.isReverse && this.loadMore) {\n      const parentElement = this.getParentElement(this.scrollComponent);\n      parentElement.scrollTop = parentElement.scrollHeight - this.beforeScrollHeight + this.beforeScrollTop;\n      this.loadMore = false;\n    }\n\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  isPassiveSupported() {\n    let passive = false;\n    const testOptions = {\n      get passive() {\n        passive = true;\n      }\n\n    };\n\n    try {\n      document.addEventListener('test', null, testOptions);\n      document.removeEventListener('test', null, testOptions);\n    } catch (e) {// ignore\n    }\n\n    return passive;\n  }\n\n  eventListenerOptions() {\n    let options = this.props.useCapture;\n\n    if (this.isPassiveSupported()) {\n      options = {\n        useCapture: this.props.useCapture,\n        passive: true\n      };\n    } else {\n      options = {\n        passive: false\n      };\n    }\n\n    return options;\n  } // Set a defaut loader for all your `InfiniteScroll` components\n\n\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n    scrollEl.removeEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n  }\n\n  getParentElement(el) {\n    const scrollParent = this.props.getScrollParent && this.props.getScrollParent();\n\n    if (scrollParent != null) {\n      return scrollParent;\n    }\n\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    const parentElement = this.getParentElement(this.scrollComponent);\n\n    if (!this.props.hasMore || !parentElement) {\n      return;\n    }\n\n    let scrollEl = window;\n\n    if (this.props.useWindow === false) {\n      scrollEl = parentElement;\n    }\n\n    scrollEl.addEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n    scrollEl.addEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n    scrollEl.addEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1 && !this.isPassiveSupported()) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n    let offset;\n\n    if (this.props.useWindow) {\n      const doc = document.documentElement || document.body.parentNode || document.body;\n      const scrollTop = scrollEl.pageYOffset !== undefined ? scrollEl.pageYOffset : doc.scrollTop;\n\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    } // Here we make sure the element is visible as well as checking the offset\n\n\n    if (offset < Number(this.props.threshold) && el && el.offsetParent !== null) {\n      this.detachScrollListener();\n      this.beforeScrollHeight = parentNode.scrollHeight;\n      this.beforeScrollTop = parentNode.scrollTop; // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore(this.pageLoaded += 1);\n        this.loadMore = true;\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      getScrollParent\n    } = renderProps,\n          props = _objectWithoutProperties(renderProps, [\"children\", \"element\", \"hasMore\", \"initialLoad\", \"isReverse\", \"loader\", \"loadMore\", \"pageStart\", \"ref\", \"threshold\", \"useCapture\", \"useWindow\", \"getScrollParent\"]);\n\n    props.ref = node => {\n      this.scrollComponent = node;\n\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n\n    if (hasMore) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse ? childrenArray.unshift(this.defaultLoader) : childrenArray.push(this.defaultLoader);\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(element, props, childrenArray);\n  }\n\n}\n\n_defineProperty(InfiniteScroll, \"propTypes\", {\n  children: PropTypes.node.isRequired,\n  element: PropTypes.node,\n  hasMore: PropTypes.bool,\n  initialLoad: PropTypes.bool,\n  isReverse: PropTypes.bool,\n  loader: PropTypes.node,\n  loadMore: PropTypes.func.isRequired,\n  pageStart: PropTypes.number,\n  ref: PropTypes.func,\n  getScrollParent: PropTypes.func,\n  threshold: PropTypes.number,\n  useCapture: PropTypes.bool,\n  useWindow: PropTypes.bool\n});\n\n_defineProperty(InfiniteScroll, \"defaultProps\", {\n  element: 'div',\n  hasMore: false,\n  initialLoad: true,\n  pageStart: 0,\n  ref: null,\n  threshold: 250,\n  useWindow: true,\n  isReverse: false,\n  useCapture: false,\n  loader: null,\n  getScrollParent: null\n});","map":{"version":3,"sources":["D:/Projects/demo/blogging-app/components/InfiniteScroll.js"],"names":["React","Component","PropTypes","InfiniteScroll","constructor","props","scrollListener","bind","eventListenerOptions","mousewheelListener","componentDidMount","pageLoaded","pageStart","options","attachScrollListener","componentDidUpdate","isReverse","loadMore","parentElement","getParentElement","scrollComponent","scrollTop","scrollHeight","beforeScrollHeight","beforeScrollTop","componentWillUnmount","detachScrollListener","detachMousewheelListener","isPassiveSupported","passive","testOptions","document","addEventListener","removeEventListener","e","useCapture","setDefaultLoader","loader","defaultLoader","scrollEl","window","useWindow","parentNode","el","scrollParent","getScrollParent","filterProps","hasMore","initialLoad","deltaY","preventDefault","offset","doc","documentElement","body","pageYOffset","undefined","calculateOffset","clientHeight","Number","threshold","offsetParent","calculateTopPosition","offsetHeight","innerHeight","offsetTop","render","renderProps","children","element","ref","node","childrenArray","unshift","push","createElement","isRequired","bool","func","number"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    pageStart: PropTypes.number,\n    ref: PropTypes.func,\n    getScrollParent: PropTypes.func,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: false,\n    useCapture: false,\n    loader: null,\n    getScrollParent: null\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n    this.eventListenerOptions = this.eventListenerOptions.bind(this);\n    this.mousewheelListener = this.mousewheelListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.options = this.eventListenerOptions();\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    if (this.props.isReverse && this.loadMore) {\n      const parentElement = this.getParentElement(this.scrollComponent);\n      parentElement.scrollTop =\n        parentElement.scrollHeight -\n        this.beforeScrollHeight +\n        this.beforeScrollTop;\n      this.loadMore = false;\n    }\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  isPassiveSupported() {\n    let passive = false;\n\n    const testOptions = {\n      get passive() {\n        passive = true;\n      }\n    };\n\n    try {\n      document.addEventListener('test', null, testOptions);\n      document.removeEventListener('test', null, testOptions);\n    } catch (e) {\n      // ignore\n    }\n    return passive;\n  }\n\n  eventListenerOptions() {\n    let options = this.props.useCapture;\n\n    if (this.isPassiveSupported()) {\n      options = {\n        useCapture: this.props.useCapture,\n        passive: true\n      };\n    } else {\n      options = {\n        passive: false\n      };\n    }\n    return options;\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.options ? this.options : this.props.useCapture\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n  }\n\n  getParentElement(el) {\n    const scrollParent =\n      this.props.getScrollParent && this.props.getScrollParent();\n    if (scrollParent != null) {\n      return scrollParent;\n    }\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    const parentElement = this.getParentElement(this.scrollComponent);\n\n    if (!this.props.hasMore || !parentElement) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = parentElement;\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1 && !this.isPassiveSupported()) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n\n    let offset;\n    if (this.props.useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        scrollEl.pageYOffset !== undefined\n          ? scrollEl.pageYOffset\n          : doc.scrollTop;\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      (el && el.offsetParent !== null)\n    ) {\n      this.detachScrollListener();\n      this.beforeScrollHeight = parentNode.scrollHeight;\n      this.beforeScrollTop = parentNode.scrollTop;\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore((this.pageLoaded += 1));\n        this.loadMore = true;\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      getScrollParent,\n      ...props\n    } = renderProps;\n\n    props.ref = node => {\n      this.scrollComponent = node;\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n    if (hasMore) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}"]},"metadata":{},"sourceType":"module"}
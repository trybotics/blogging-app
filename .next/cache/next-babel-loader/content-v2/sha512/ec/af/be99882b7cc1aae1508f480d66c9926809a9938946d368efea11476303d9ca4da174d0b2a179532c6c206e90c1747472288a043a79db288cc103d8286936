{"ast":null,"code":"import _objectWithoutProperties from \"D:/Projects/demo/blogging-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"D:/Projects/demo/blogging-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/Projects/demo/blogging-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"D:/Projects/demo/blogging-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:/Projects/demo/blogging-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:/Projects/demo/blogging-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:/Projects/demo/blogging-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"D:/Projects/demo/blogging-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nvar InfiniteScroll = /*#__PURE__*/function (_Component) {\n  _inherits(InfiniteScroll, _Component);\n\n  var _super = _createSuper(InfiniteScroll);\n\n  function InfiniteScroll(props) {\n    var _this;\n\n    _classCallCheck(this, InfiniteScroll);\n\n    _this = _super.call(this, props);\n    _this.scrollListener = _this.scrollListener.bind(_assertThisInitialized(_this));\n    _this.eventListenerOptions = _this.eventListenerOptions.bind(_assertThisInitialized(_this));\n    _this.mousewheelListener = _this.mousewheelListener.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(InfiniteScroll, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.pageLoaded = this.props.pageStart;\n      this.options = this.eventListenerOptions();\n      this.attachScrollListener();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.isReverse && this.loadMore) {\n        var parentElement = this.getParentElement(this.scrollComponent);\n        parentElement.scrollTop = parentElement.scrollHeight - this.beforeScrollHeight + this.beforeScrollTop;\n        this.loadMore = false;\n      }\n\n      this.attachScrollListener();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.detachScrollListener();\n      this.detachMousewheelListener();\n    }\n  }, {\n    key: \"isPassiveSupported\",\n    value: function isPassiveSupported() {\n      var passive = false;\n      var testOptions = {\n        get passive() {\n          passive = true;\n        }\n\n      };\n\n      try {\n        document.addEventListener('test', null, testOptions);\n        document.removeEventListener('test', null, testOptions);\n      } catch (e) {// ignore\n      }\n\n      return passive;\n    }\n  }, {\n    key: \"eventListenerOptions\",\n    value: function eventListenerOptions() {\n      var options = this.props.useCapture;\n\n      if (this.isPassiveSupported()) {\n        options = {\n          useCapture: this.props.useCapture,\n          passive: true\n        };\n      } else {\n        options = {\n          passive: false\n        };\n      }\n\n      return options;\n    } // Set a defaut loader for all your `InfiniteScroll` components\n\n  }, {\n    key: \"setDefaultLoader\",\n    value: function setDefaultLoader(loader) {\n      this.defaultLoader = loader;\n    }\n  }, {\n    key: \"detachMousewheelListener\",\n    value: function detachMousewheelListener() {\n      var scrollEl = window;\n\n      if (this.props.useWindow === false) {\n        scrollEl = this.scrollComponent.parentNode;\n      }\n\n      scrollEl.removeEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: \"detachScrollListener\",\n    value: function detachScrollListener() {\n      var scrollEl = window;\n\n      if (this.props.useWindow === false) {\n        scrollEl = this.getParentElement(this.scrollComponent);\n      }\n\n      scrollEl.removeEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.removeEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: \"getParentElement\",\n    value: function getParentElement(el) {\n      var scrollParent = this.props.getScrollParent && this.props.getScrollParent();\n\n      if (scrollParent != null) {\n        return scrollParent;\n      }\n\n      return el && el.parentNode;\n    }\n  }, {\n    key: \"filterProps\",\n    value: function filterProps(props) {\n      return props;\n    }\n  }, {\n    key: \"attachScrollListener\",\n    value: function attachScrollListener() {\n      var parentElement = this.getParentElement(this.scrollComponent);\n\n      if (!this.props.hasMore || !parentElement) {\n        return;\n      }\n\n      var scrollEl = window;\n\n      if (this.props.useWindow === false) {\n        scrollEl = parentElement;\n      }\n\n      scrollEl.addEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n\n      if (this.props.initialLoad) {\n        this.scrollListener();\n      }\n    }\n  }, {\n    key: \"mousewheelListener\",\n    value: function mousewheelListener(e) {\n      // Prevents Chrome hangups\n      // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n      if (e.deltaY === 1 && !this.isPassiveSupported()) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"scrollListener\",\n    value: function scrollListener() {\n      var el = this.scrollComponent;\n      var scrollEl = window;\n      var parentNode = this.getParentElement(el);\n      var offset;\n\n      if (this.props.useWindow) {\n        var doc = document.documentElement || document.body.parentNode || document.body;\n        var scrollTop = scrollEl.pageYOffset !== undefined ? scrollEl.pageYOffset : doc.scrollTop;\n\n        if (this.props.isReverse) {\n          offset = scrollTop;\n        } else {\n          offset = this.calculateOffset(el, scrollTop);\n        }\n      } else if (this.props.isReverse) {\n        offset = parentNode.scrollTop;\n      } else {\n        offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n      } // Here we make sure the element is visible as well as checking the offset\n\n\n      if (offset < Number(this.props.threshold) && el && el.offsetParent !== null) {\n        this.detachScrollListener();\n        this.beforeScrollHeight = parentNode.scrollHeight;\n        this.beforeScrollTop = parentNode.scrollTop; // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n\n        if (typeof this.props.loadMore === 'function') {\n          this.props.loadMore(this.pageLoaded += 1);\n          this.loadMore = true;\n        }\n      }\n    }\n  }, {\n    key: \"calculateOffset\",\n    value: function calculateOffset(el, scrollTop) {\n      if (!el) {\n        return 0;\n      }\n\n      return this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n    }\n  }, {\n    key: \"calculateTopPosition\",\n    value: function calculateTopPosition(el) {\n      if (!el) {\n        return 0;\n      }\n\n      return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var renderProps = this.filterProps(this.props);\n\n      var children = renderProps.children,\n          element = renderProps.element,\n          hasMore = renderProps.hasMore,\n          initialLoad = renderProps.initialLoad,\n          isReverse = renderProps.isReverse,\n          loader = renderProps.loader,\n          loadMore = renderProps.loadMore,\n          pageStart = renderProps.pageStart,\n          ref = renderProps.ref,\n          threshold = renderProps.threshold,\n          useCapture = renderProps.useCapture,\n          useWindow = renderProps.useWindow,\n          getScrollParent = renderProps.getScrollParent,\n          props = _objectWithoutProperties(renderProps, [\"children\", \"element\", \"hasMore\", \"initialLoad\", \"isReverse\", \"loader\", \"loadMore\", \"pageStart\", \"ref\", \"threshold\", \"useCapture\", \"useWindow\", \"getScrollParent\"]);\n\n      props.ref = function (node) {\n        _this2.scrollComponent = node;\n\n        if (ref) {\n          ref(node);\n        }\n      };\n\n      var childrenArray = [children];\n\n      if (hasMore) {\n        if (loader) {\n          isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n        } else if (this.defaultLoader) {\n          isReverse ? childrenArray.unshift(this.defaultLoader) : childrenArray.push(this.defaultLoader);\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(element, props, childrenArray);\n    }\n  }]);\n\n  return InfiniteScroll;\n}(Component);\n\n_defineProperty(InfiniteScroll, \"propTypes\", {\n  children: PropTypes.node.isRequired,\n  element: PropTypes.node,\n  hasMore: PropTypes.bool,\n  initialLoad: PropTypes.bool,\n  isReverse: PropTypes.bool,\n  loader: PropTypes.node,\n  loadMore: PropTypes.func.isRequired,\n  pageStart: PropTypes.number,\n  ref: PropTypes.func,\n  getScrollParent: PropTypes.func,\n  threshold: PropTypes.number,\n  useCapture: PropTypes.bool,\n  useWindow: PropTypes.bool\n});\n\n_defineProperty(InfiniteScroll, \"defaultProps\", {\n  element: 'div',\n  hasMore: false,\n  initialLoad: true,\n  pageStart: 0,\n  ref: null,\n  threshold: 250,\n  useWindow: true,\n  isReverse: false,\n  useCapture: false,\n  loader: null,\n  getScrollParent: null\n});\n\nexport { InfiniteScroll as default };","map":{"version":3,"sources":["D:/Projects/demo/blogging-app/components/InfiniteScroll.js"],"names":["React","Component","PropTypes","InfiniteScroll","props","scrollListener","bind","eventListenerOptions","mousewheelListener","pageLoaded","pageStart","options","attachScrollListener","isReverse","loadMore","parentElement","getParentElement","scrollComponent","scrollTop","scrollHeight","beforeScrollHeight","beforeScrollTop","detachScrollListener","detachMousewheelListener","passive","testOptions","document","addEventListener","removeEventListener","e","useCapture","isPassiveSupported","loader","defaultLoader","scrollEl","window","useWindow","parentNode","el","scrollParent","getScrollParent","hasMore","initialLoad","deltaY","preventDefault","offset","doc","documentElement","body","pageYOffset","undefined","calculateOffset","clientHeight","Number","threshold","offsetParent","calculateTopPosition","offsetHeight","innerHeight","offsetTop","renderProps","filterProps","children","element","ref","node","childrenArray","unshift","push","createElement","isRequired","bool","func","number"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    pageStart: PropTypes.number,\n    ref: PropTypes.func,\n    getScrollParent: PropTypes.func,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: false,\n    useCapture: false,\n    loader: null,\n    getScrollParent: null\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n    this.eventListenerOptions = this.eventListenerOptions.bind(this);\n    this.mousewheelListener = this.mousewheelListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.options = this.eventListenerOptions();\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    if (this.props.isReverse && this.loadMore) {\n      const parentElement = this.getParentElement(this.scrollComponent);\n      parentElement.scrollTop =\n        parentElement.scrollHeight -\n        this.beforeScrollHeight +\n        this.beforeScrollTop;\n      this.loadMore = false;\n    }\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  isPassiveSupported() {\n    let passive = false;\n\n    const testOptions = {\n      get passive() {\n        passive = true;\n      }\n    };\n\n    try {\n      document.addEventListener('test', null, testOptions);\n      document.removeEventListener('test', null, testOptions);\n    } catch (e) {\n      // ignore\n    }\n    return passive;\n  }\n\n  eventListenerOptions() {\n    let options = this.props.useCapture;\n\n    if (this.isPassiveSupported()) {\n      options = {\n        useCapture: this.props.useCapture,\n        passive: true\n      };\n    } else {\n      options = {\n        passive: false\n      };\n    }\n    return options;\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.options ? this.options : this.props.useCapture\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n  }\n\n  getParentElement(el) {\n    const scrollParent =\n      this.props.getScrollParent && this.props.getScrollParent();\n    if (scrollParent != null) {\n      return scrollParent;\n    }\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    const parentElement = this.getParentElement(this.scrollComponent);\n\n    if (!this.props.hasMore || !parentElement) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = parentElement;\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.options ? this.options : this.props.useCapture\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1 && !this.isPassiveSupported()) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n\n    let offset;\n    if (this.props.useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        scrollEl.pageYOffset !== undefined\n          ? scrollEl.pageYOffset\n          : doc.scrollTop;\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      (el && el.offsetParent !== null)\n    ) {\n      this.detachScrollListener();\n      this.beforeScrollHeight = parentNode.scrollHeight;\n      this.beforeScrollTop = parentNode.scrollTop;\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore((this.pageLoaded += 1));\n        this.loadMore = true;\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      getScrollParent,\n      ...props\n    } = renderProps;\n\n    props.ref = node => {\n      this.scrollComponent = node;\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n    if (hasMore) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}"]},"metadata":{},"sourceType":"module"}